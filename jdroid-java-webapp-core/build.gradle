apply plugin: 'com.jdroid.java.library'

ext.PROJECT_NAME = 'Jdroid Java Web App'
description = 'Jdroid library for Java Web apps'

ext.SPRING_VERSION = '3.2.18.RELEASE'

configurations.all {
	// check for updates every build
	resolutionStrategy.cacheChangingModulesFor 0, 'seconds'
}

buildscript {
	dependencies {
		classpath 'com.jdroidframework:jdroid-gradle-java-plugin:' + JDROID_GRADLE_PLUGIN_VERSION
	}
}

dependencies {

	// Jdroid dependencies

	if (jdroid.getBooleanProp("JDROID_JAVA_AS_PROJECT_DEPENDENCY", false)) {
		compile project(":jdroid-java-core")
	} else {
		compile 'com.jdroidframework:jdroid-java-core:' + JDROID_JAVA_VERSION
	}

	if (jdroid.getBooleanProp("JDROID_JAVA_HTTP_AS_PROJECT_DEPENDENCY", false)) {
		compile project(":jdroid-java-http-core")
	} else {
		compile ('com.jdroidframework:jdroid-java-http-core:' + JDROID_JAVA_HTTP_VERSION) {
			exclude module: 'jdroid-java-core'
		}
	}

	// Push for Android
	compile "com.googlecode.json-simple:json-simple:1.1"

	// Sentry
	compile 'com.getsentry.raven:raven:7.8.1'

	// Logging
	compile "log4j:log4j:1.2.17"
	compile "org.slf4j:slf4j-log4j12:1.7.7"

	// Spring
	compile "org.springframework:spring-core:" + SPRING_VERSION
	compile "org.springframework:spring-web:" + SPRING_VERSION
	compile "org.springframework:spring-webmvc:" + SPRING_VERSION
	compile "org.springframework:spring-context-support:" + SPRING_VERSION

	// Jackson
	compile "com.fasterxml.jackson.core:jackson-core:2.7.3"
	compile "com.fasterxml.jackson.core:jackson-databind:2.7.3"
	compile "com.fasterxml.jackson.core:jackson-annotations:2.7.3"

	// Facebook
	compile "com.restfb:restfb:1.6.12"

	// Twitter
	// http://twitter4j.org/en/index.html#download
	compile "org.twitter4j:twitter4j-core:4.0.4"

	// Apache Commons
	compile "commons-collections:commons-collections:3.2.2"
	compile "commons-beanutils:commons-beanutils:1.8.3"

	// Guava
	compile "com.google.guava:guava:18.0"

	// Open CSV
	compile "net.sf.opencsv:opencsv:2.3"

	// Servlet API
	compile "javax.servlet:servlet-api:2.5"

	compile "org.json:json:20131018"

	// Testing
	testCompile "org.testng:testng:6.8.21"
	testCompile "org.mockito:mockito-all:1.10.19"
}

test {
	useTestNG {
	}
}
